# Flutter Packaging Notes

## Key Requirements

1. **Flutter version selection**: Choose the appropriate Flutter version (flutter327, flutter329, flutter338, etc.). Check nixpkgs for available versions.

2. **pubspec.lock to JSON**: Convert pubspec.lock to JSON format using `yq . pubspec.lock > pubspec.lock.json`

3. **Git dependencies**: Specify commit hashes for any git dependencies in the `gitHashes` attribute.

4. **Desktop integration**: For Linux desktop apps, create proper desktop files and install icons in multiple sizes.

## Platform-Specific Considerations

### Linux Desktop
- Requires `wrapGAppsHook3` (automatically included)
- WebRTC apps need `libgbm` and `libdrm` with proper rpath linking
- Icons should be generated in multiple sizes using ImageMagick

### Web Platform
- Set `targetFlutterPlatform = "web"`
- Output will be static web files in `$out`
- May need to handle external JavaScript dependencies (like Olm for encryption)

## Build Modes

Flutter supports different build modes:
- `--release` (default): Optimized for performance
- `--profile`: Performance profiling enabled
- `--debug`: Full debugging support
